<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="jpeg">
<title>Example Analysis • jpeg</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.5/font.css" rel="stylesheet">
<link href="../deps/Nunito-0.4.5/font.css" rel="stylesheet">
<link href="../deps/Roboto_Slab-0.4.5/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Example Analysis">
<meta property="og:description" content="jpeg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">jpeg</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1-10</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Example_analysis.html">Example Analysis</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/s-u/jpeg/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Example Analysis</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/s-u/jpeg/blob/HEAD/vignettes/Example_analysis.Rmd" class="external-link"><code>vignettes/Example_analysis.Rmd</code></a></small>
      <div class="d-none name"><code>Example_analysis.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.rforge.net/jpeg/" class="external-link">jpeg</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Attaching packages</span> ─────────────────────────────────────── tidyverse 1.3.2 ──</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">ggplot2</span> 3.4.0     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">purrr  </span> 1.0.2</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">tibble </span> 3.2.1     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">dplyr  </span> 1.1.4</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">tidyr  </span> 1.3.0     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">stringr</span> 1.5.0</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">readr  </span> 2.1.4     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">forcats</span> 0.5.2</span></span>
<span><span class="co">#&gt; Warning: package 'dplyr' was built under R version 4.2.3</span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Conflicts</span> ────────────────────────────────────────── tidyverse_conflicts() ──</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> <span style="color: #0000BB;">dplyr</span>::<span style="color: #00BB00;">filter()</span> masks <span style="color: #0000BB;">stats</span>::filter()</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> <span style="color: #0000BB;">dplyr</span>::<span style="color: #00BB00;">lag()</span>    masks <span style="color: #0000BB;">stats</span>::lag()</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://here.r-lib.org/" class="external-link">here</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; here() starts at /Users/jiayixue/Downloads/Project3/jpeg_package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://purrr.tidyverse.org/" class="external-link">purrr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: timechange</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'lubridate'</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     date, intersect, setdiff, union</span></span></code></pre></div>
<div class="section level4">
<h4 id="question">Question<a class="anchor" aria-label="anchor" href="#question"></a>
</h4>
<p>I tried to use this dataset to find the relationship between light
levels and bird collisions with or without flight calls. Also we want to
identify the trend of light levels over time.</p>
</div>
<div class="section level4">
<h4 id="data-recourses">Data recourses<a class="anchor" aria-label="anchor" href="#data-recourses"></a>
</h4>
<p>The data comes from a research which examined nocturnal
flight-calling behavior and vulnerability to artificial light in
migratory birds in Chicago<span class="citation">(Winger et al.
2019)</span>.</p>
<p>I downloaded this dataset from <a href="https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-04-30/bird_collisions.csv" class="external-link">here</a>.
You can also download this dataset using “tidytuesdayR” package. The
data I used only containing the raw and tamed Chicago dataset as it is
the most complete.</p>
<p>We can use the <code><a href="../reference/readJPEG.html">readJPEG()</a></code> function in the jpeg package
to read an image from a JPEG, and then we can plot the figure.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">study_locations</span> <span class="op">&lt;-</span> <span class="fu">jpeg</span><span class="fu">::</span><span class="fu"><a href="../reference/readJPEG.html">readJPEG</a></span><span class="op">(</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"study_locations.jpeg"</span><span class="op">)</span>, <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/exists.html" class="external-link">exists</a></span><span class="op">(</span><span class="st">"rasterImage"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span> <span class="co"># can plot only in R 2.11.0 and higher</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, type<span class="op">=</span><span class="st">'n'</span>, axes<span class="op">=</span><span class="cn">FALSE</span>, xlab<span class="op">=</span><span class="st">""</span>, ylab<span class="op">=</span><span class="st">""</span>, main <span class="op">=</span> <span class="st">"Study Locations(Winger et al. 2019)"</span><span class="op">)</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/graphics/rasterImage.html" class="external-link">rasterImage</a></span><span class="op">(</span><span class="va">study_locations</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span></code></pre></div>
<p><img src="Example_analysis_files/figure-html/unnamed-chunk-2-1.png" width="576"></p>
<p>We can also use the <code><a href="../reference/writeJPEG.html">writeJPEG()</a></code> function in the
<code>jpeg</code> package to create a JPEG image from an array or
matrix. At the same time, we can change the quality and the background
color of the image.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">study_locations_arrary</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/writeJPEG.html">writeJPEG</a></span><span class="op">(</span><span class="va">study_locations</span>, <span class="fu"><a href="https://rdrr.io/r/base/raw.html" class="external-link">raw</a></span><span class="op">(</span><span class="op">)</span>, quality<span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span></span>
<span><span class="va">study_locations_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readJPEG.html">readJPEG</a></span><span class="op">(</span><span class="va">study_locations_arrary</span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/exists.html" class="external-link">exists</a></span><span class="op">(</span><span class="st">"rasterImage"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span> <span class="co"># can plot only in R 2.11.0 and higher</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, type<span class="op">=</span><span class="st">'n'</span>, axes<span class="op">=</span><span class="cn">FALSE</span>, xlab<span class="op">=</span><span class="st">""</span>, ylab<span class="op">=</span><span class="st">""</span>, main <span class="op">=</span> <span class="st">"Study Locations(Winger et al. 2019)"</span><span class="op">)</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/graphics/rasterImage.html" class="external-link">rasterImage</a></span><span class="op">(</span><span class="va">study_locations</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span></code></pre></div>
<p><img src="Example_analysis_files/figure-html/unnamed-chunk-3-1.png" width="576"></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/object.size.html" class="external-link">object.size</a></span><span class="op">(</span><span class="va">study_locations</span><span class="op">)</span></span>
<span><span class="co">#&gt; 602616 bytes</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/object.size.html" class="external-link">object.size</a></span><span class="op">(</span><span class="va">study_locations_2</span><span class="op">)</span></span>
<span><span class="co">#&gt; 3612224 bytes</span></span></code></pre></div>
<p>We can see that after applying <code><a href="../reference/writeJPEG.html">writeJPEG()</a></code> function, the
size of the image has changed.</p>
</div>
<div class="section level4">
<h4 id="data-dictionary">Data Dictionary<a class="anchor" aria-label="anchor" href="#data-dictionary"></a>
</h4>
<div class="section level5">
<h5 id="bird-collisions-dataset">bird collisions dataset<a class="anchor" aria-label="anchor" href="#bird-collisions-dataset"></a>
</h5>
<table class="table">
<colgroup>
<col width="27%">
<col width="72%">
</colgroup>
<thead><tr class="header">
<th>Variable</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>genus</td>
<td>Bird Genus</td>
</tr>
<tr class="even">
<td>species</td>
<td>Bird species</td>
</tr>
<tr class="odd">
<td>date</td>
<td>Date of collision death (ymd)</td>
</tr>
<tr class="even">
<td>locality</td>
<td>MP or CHI - recording at either McCormick Place or greater Chicago
area</td>
</tr>
<tr class="odd">
<td>family</td>
<td>Bird Family</td>
</tr>
<tr class="even">
<td>flight_call</td>
<td>Does the bird use a flight call - yes or no</td>
</tr>
<tr class="odd">
<td>habitat</td>
<td>Open, Forest, Edge - their habitat affinity</td>
</tr>
<tr class="even">
<td>stratum</td>
<td>Typical occupied stratum - ground/low or canopy/upper</td>
</tr>
</tbody>
</table>
</div>
<div class="section level5">
<h5 id="bird-collisions-dataset-1">bird collisions dataset<a class="anchor" aria-label="anchor" href="#bird-collisions-dataset-1"></a>
</h5>
<table class="table">
<colgroup>
<col width="27%">
<col width="72%">
</colgroup>
<thead><tr class="header">
<th>Variable</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>date</td>
<td>Date of light recording (ymd)</td>
</tr>
<tr class="even">
<td>light_score</td>
<td>Number of windows lit at the McCormick Place, Chicago - higher =
more light</td>
</tr>
</tbody>
</table>
<p>You can also find the data dictionary <a href="https://github.com/rfordatascience/tidytuesday/tree/master/data/2019/2019-04-30#data-dictionary" class="external-link">here</a></p>
</div>
</div>
<div class="section level4">
<h4 id="load-the-data-into-r">Load the data into R<a class="anchor" aria-label="anchor" href="#load-the-data-into-r"></a>
</h4>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.exists</a></span><span class="op">(</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"data"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"data"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># saves data only once (not each time you knit a R Markdown)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"bird_collisions.rda"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">url_csv</span> <span class="op">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-04-30/bird_collisions.csv"</span></span>
<span>    <span class="va">bird_collisions</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span><span class="va">url_csv</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># save the file to rda objects</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/save.html" class="external-link">save</a></span><span class="op">(</span><span class="va">bird_collisions</span>, file <span class="op">=</span> <span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"bird_collisions.rda"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Read in the data locally</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/load.html" class="external-link">load</a></span><span class="op">(</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"bird_collisions.rda"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load the second dataset</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"mp_light.rda"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">url_csv</span> <span class="op">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-04-30/mp_light.csv"</span></span>
<span>    <span class="va">mp_light</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span><span class="va">url_csv</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># save the file to rda objects</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/save.html" class="external-link">save</a></span><span class="op">(</span><span class="va">mp_light</span>, file <span class="op">=</span> <span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"mp_light.rda"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Read in the data locally</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/load.html" class="external-link">load</a></span><span class="op">(</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"mp_light.rda"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="data-wrangling-and-data-visualization">data wrangling and data visualization<a class="anchor" aria-label="anchor" href="#data-wrangling-and-data-visualization"></a>
</h4>
<p>In order to look at the effects of light on bird collisions, we join
the two datasets, which may drop many rows in the bird_collisions data
frame.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bird_collisions_light</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">inner_join</a></span><span class="op">(</span><span class="va">bird_collisions</span>, <span class="va">mp_light</span>,</span>
<span>                                   by <span class="op">=</span> <span class="st">"date"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in inner_join(bird_collisions, mp_light, by = "date"): Detected an unexpected many-to-many relationship between `x` and `y`.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Row 5289 of `x` matches multiple rows in `y`.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Row 9 of `y` matches multiple rows in `x`.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> If a many-to-many relationship is expected, set `relationship =</span></span>
<span><span class="co">#&gt;   "many-to-many"` to silence this warning.</span></span></code></pre></div>
<p>First of all, let’s look at the relationship between bird collision
counts of species and the flight calls. There are two species (Pipilo
erythrophthalmus and Tyrannus tyrannus) giving nocturnal flight calls
only rarely. During the data analysis, authors found that
“classification of these species as ‘yes’ or ‘no’ for flight-calling
behaviour did not affect our results” and classified these two species
as ‘no’<span class="citation">(Winger et al. 2019)</span>. Here, we also
classified these two species as ‘no’ to make analysis easier.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">is_yes</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">x</span> <span class="op">==</span> <span class="st">"Yes"</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span></span>
<span><span class="va">is_no</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">x</span> <span class="op">==</span> <span class="st">"No"</span> <span class="op">||</span> <span class="va">x</span> <span class="op">==</span> <span class="st">"Rare"</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span></span>
<span><span class="va">flight_call_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>freq_yes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_lgl</a></span><span class="op">(</span><span class="va">bird_collisions_light</span><span class="op">$</span><span class="va">flight_call</span>, <span class="va">is_yes</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                      freq_no <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_lgl</a></span><span class="op">(</span><span class="va">bird_collisions_light</span><span class="op">$</span><span class="va">flight_call</span>, <span class="va">is_no</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">flight_call_list</span><span class="op">)</span></span>
<span><span class="co">#&gt;   freq_yes    freq_no </span></span>
<span><span class="co">#&gt; 0.95828137 0.04171863</span></span></code></pre></div>
<p>From the results, we can conclude that most of the bird collisions
happen within the flight callers which use vocal signals during their
nocturnal migrations to function as important social cues that may aid
in orientation, navigation and other decision-making behaviours. The
effect of flight calling is evident so we need to consider the flight
call in the following analysis.</p>
<p>Then we want to look at the relationship between the light levels and
collision counts.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">#First, we classified two species with 'rare' calls as 'no'.</span></span>
<span><span class="va">bird_collisions_light</span><span class="op">$</span><span class="va">flight_call</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_chr</a></span><span class="op">(</span><span class="va">bird_collisions_light</span><span class="op">$</span><span class="va">flight_call</span>, <span class="op">~</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="va">.x</span> <span class="op">==</span> <span class="st">"Rare"</span>, <span class="st">"No"</span>, <span class="va">.x</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># the bird collisions count among flight noncallers</span></span>
<span><span class="va">collision_counts_light_noncaller</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">bird_collisions_light</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">flight_call</span> <span class="op">==</span> <span class="st">"No"</span> <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">light_score</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>count <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/split.html" class="external-link">split</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">light_score</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>           </span>
<span>  <span class="fu"><a href="https://purrr.tidyverse.org/reference/map_dfr.html" class="external-link">map_df</a></span><span class="op">(</span><span class="op">~</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">light_score</span>, count <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">count</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">collision_counts_light_noncaller</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 15 × 2</span></span></span>
<span><span class="co">#&gt;    light_score count</span></span>
<span><span class="co">#&gt;          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>           3   131</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>           4   316</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>           5    68</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>           6   134</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>           7    54</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>           8    19</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>           9    72</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>          10    74</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>          11    52</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>          12    93</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>          13    65</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span>          14   187</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span>          15    87</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span>          16    62</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span>          17   292</span></span>
<span></span>
<span><span class="co"># the bird collisions count among flight callers</span></span>
<span><span class="va">collision_counts_light_caller</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">bird_collisions_light</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">flight_call</span> <span class="op">==</span> <span class="st">"Yes"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">light_score</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>count <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/split.html" class="external-link">split</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">light_score</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>           </span>
<span>  <span class="fu"><a href="https://purrr.tidyverse.org/reference/map_dfr.html" class="external-link">map_df</a></span><span class="op">(</span><span class="op">~</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">light_score</span>, count <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">count</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">collision_counts_light_caller</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 15 × 2</span></span></span>
<span><span class="co">#&gt;    light_score count</span></span>
<span><span class="co">#&gt;          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>           3  <span style="text-decoration: underline;">2</span>917</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>           4  <span style="text-decoration: underline;">5</span>900</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>           5  <span style="text-decoration: underline;">1</span>124</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>           6  <span style="text-decoration: underline;">1</span>908</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>           7  <span style="text-decoration: underline;">1</span>089</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>           8   502</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>           9  <span style="text-decoration: underline;">1</span>211</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>          10  <span style="text-decoration: underline;">1</span>437</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>          11  <span style="text-decoration: underline;">1</span>082</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>          12  <span style="text-decoration: underline;">2</span>613</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>          13  <span style="text-decoration: underline;">1</span>266</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span>          14  <span style="text-decoration: underline;">5</span>040</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span>          15  <span style="text-decoration: underline;">2</span>463</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span>          16  <span style="text-decoration: underline;">2</span>898</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span>          17  <span style="text-decoration: underline;">7</span>737</span></span>
<span></span>
<span><span class="co"># the bird collisions count </span></span>
<span><span class="va">collision_counts_light</span> <span class="op">&lt;-</span>  </span>
<span>  <span class="va">bird_collisions_light</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">light_score</span>, <span class="va">flight_call</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>count <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_split.html" class="external-link">group_split</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; `summarise()` has grouped output by 'light_score'. You can override using the</span></span>
<span><span class="co">#&gt; `.groups` argument.</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">collision_counts_light</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html" class="external-link">geom_smooth</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">light_score</span>, y <span class="op">=</span> <span class="va">count</span>, color <span class="op">=</span> <span class="va">flight_call</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">light_score</span>, y <span class="op">=</span> <span class="va">count</span>, color <span class="op">=</span> <span class="va">flight_call</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">flight_call</span>, ncol <span class="op">=</span> <span class="fl">1</span>,  scales <span class="op">=</span> <span class="st">"free"</span> <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lightblue"</span>, <span class="st">"lightpink"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span>base_family <span class="op">=</span> <span class="st">"Times"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Light Score"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Bird Collisions Counts"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"The Relationship Between Light Levels and Bird Collision Counts"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"The flight noncallers group and flight callers group show the same trend as the light score increases.\nAt first,the number of bird collisions decrease as the light increases,\nthen as light scores increase, the bird collision counts also tend to increase.\nIn general, the bird collisions maintain an upward trajectory."</span>,</span>
<span>    caption <span class="op">=</span> <span class="st">"Jiayi Xue"</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"Nocturnal Flight Call"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>        plot.title <span class="op">=</span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">14</span>, face <span class="op">=</span> <span class="st">"bold"</span>, hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>        plot.caption <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>,</span>
<span>        axis.text.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">9</span><span class="op">)</span>,</span>
<span>        axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">13</span><span class="op">)</span>,</span>
<span>        legend.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>,</span>
<span>        legend.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">12</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula = 'y ~ x'</span></span></code></pre></div>
<p><img src="Example_analysis_files/figure-html/unnamed-chunk-9-1.png" width="768"></p>
<p>Then let’s find out the top 50 species most commonly reported in the
bird collisions. Since now we are not going to look at the effects of
light levels, we will use the original bird collision dataset so that
more data were collected.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">bird_collisions_species</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">bird_collisions</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">species</span>, <span class="va">flight_call</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>count <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>species <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_reorder.html" class="external-link">fct_reorder</a></span><span class="op">(</span><span class="va">species</span>, <span class="va">count</span>, .desc <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">count</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; `summarise()` has grouped output by 'species'. You can override using the</span></span>
<span><span class="co">#&gt; `.groups` argument.</span></span>
<span></span>
<span><span class="va">bird_collisions_species</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 84 × 3</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Groups:   species [81]</span></span></span>
<span><span class="co">#&gt;    species     flight_call count</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> albicollis  Yes         <span style="text-decoration: underline;">10</span>133</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> hyemalis    Yes          <span style="text-decoration: underline;">6</span>303</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> melodia     Yes          <span style="text-decoration: underline;">5</span>124</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> georgiana   Yes          <span style="text-decoration: underline;">4</span>910</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> aurocapilla Yes          <span style="text-decoration: underline;">4</span>580</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> guttatus    Yes          <span style="text-decoration: underline;">3</span>729</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> americana   Yes          <span style="text-decoration: underline;">2</span>735</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> peregrina   Yes          <span style="text-decoration: underline;">2</span>515</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> iliaca      Yes          <span style="text-decoration: underline;">2</span>443</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> ustulatus   Yes          <span style="text-decoration: underline;">2</span>331</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 74 more rows</span></span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">bird_collisions_species</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">50</span>, <span class="op">]</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">count</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html" class="external-link">reorder</a></span><span class="op">(</span><span class="va">species</span>, <span class="va">count</span><span class="op">)</span>, fill <span class="op">=</span> <span class="va">flight_call</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span>base_family <span class="op">=</span> <span class="st">"Times"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Bird Collisions Counts"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Bird Species"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Bird Collisions Counts for Top 50 species"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"From the bar plot, we can see that bird collisions happen most frequently among albicollis, with more than 10000 collisions.\nAmong top 50 species, most of the species are flight callers, which is consistent with our previous results."</span>,</span>
<span>    caption <span class="op">=</span> <span class="st">"Jiayi Xue"</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"Nocturnal Flight Call"</span>,</span>
<span>    </span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_fill_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lightblue"</span>, <span class="st">"lightpink"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>        plot.title <span class="op">=</span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">14</span>, face <span class="op">=</span> <span class="st">"bold"</span>, hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>        plot.caption <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>,</span>
<span>        axis.text.x <span class="op">=</span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>,</span>
<span>        axis.text.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">9</span><span class="op">)</span>,</span>
<span>        axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>        legend.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>,</span>
<span>        legend.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">12</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="Example_analysis_files/figure-html/unnamed-chunk-11-1.png" width="864"></p>
<p>Finally, let’s look at the distribution of the light levels as the
time goes from 2000 to 2018.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">light_years</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">mp_light</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/year.html" class="external-link">year</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">light_years</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3,067 × 3</span></span></span>
<span><span class="co">#&gt;    date       light_score  year</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2000-03-06           3  <span style="text-decoration: underline;">2</span>000</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2000-03-08          15  <span style="text-decoration: underline;">2</span>000</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2000-03-10           3  <span style="text-decoration: underline;">2</span>000</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2000-03-31           3  <span style="text-decoration: underline;">2</span>000</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2000-04-02          17  <span style="text-decoration: underline;">2</span>000</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2000-04-14           4  <span style="text-decoration: underline;">2</span>000</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2000-04-15           4  <span style="text-decoration: underline;">2</span>000</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2000-04-30          14  <span style="text-decoration: underline;">2</span>000</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2000-05-01          14  <span style="text-decoration: underline;">2</span>000</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2000-05-03           3  <span style="text-decoration: underline;">2</span>000</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3,057 more rows</span></span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">color_list</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/grDevices/colorRamp.html" class="external-link">colorRampPalette</a></span><span class="op">(</span><span class="fu">ggsci</span><span class="fu">::</span><span class="fu"><a href="https://nanx.me/ggsci/reference/pal_npg.html" class="external-link">pal_npg</a></span><span class="op">(</span><span class="st">"nrc"</span>, alpha <span class="op">=</span> <span class="fl">0.6</span><span class="op">)</span><span class="op">(</span><span class="fl">4</span><span class="op">)</span>,space <span class="op">=</span> <span class="st">"Lab"</span><span class="op">)</span><span class="op">(</span><span class="fl">19</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">light_years</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html" class="external-link">geom_boxplot</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">light_score</span>, fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span><span class="op">)</span>, width <span class="op">=</span> <span class="fl">0.5</span>, alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span>base_family <span class="op">=</span> <span class="st">"Times"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Light Levels"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Boxplots of Light Levels over Time"</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"The light levels have a fluctuating but overall increasing trend over time from the year 2000 to 2018. \nThe median light levels seem to be higher in the later years, particularly from 2014 to 2018."</span>,</span>
<span>    caption <span class="op">=</span> <span class="st">"Jiayi Xue"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_fill_manual</a></span><span class="op">(</span> values <span class="op">=</span> <span class="va">color_list</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>        plot.title <span class="op">=</span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">14</span>, face <span class="op">=</span> <span class="st">"bold"</span>, hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>        plot.caption <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>,</span>
<span>        axis.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">9</span><span class="op">)</span>,</span>
<span>        axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>        legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></span></code></pre></div>
<p><img src="Example_analysis_files/figure-html/unnamed-chunk-13-1.png" width="864"></p>
</div>
<div class="section level4">
<h4 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h4>
<p>The dataset collects the bird collision data in Chicago. The scatter
plots shows that bird collisions happen more frequently as the light
level increases. The bar plot displays the collision counts for the top
50 species, which indicates the evident effect of the flight calls. The
boxplots indicates the overall increasing trend of the collisions over
time. Together, we find that there are many factors influencing the
number of bird collisions.</p>
</div>
<div class="section level2">
<h2 id="functions-used">functions used<a class="anchor" aria-label="anchor" href="#functions-used"></a>
</h2>
<table class="table">
<colgroup>
<col width="18%">
<col width="81%">
</colgroup>
<thead><tr class="header">
<th>Package</th>
<th>Function</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>dylyr</code></td>
<td>
<code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup()</a></code>,
<code>summarise</code>, <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate()</a></code>,
<code><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">inner_join()</a></code>
</td>
</tr>
<tr class="even">
<td><code>forcats</code></td>
<td><code><a href="https://forcats.tidyverse.org/reference/fct_reorder.html" class="external-link">fct_reorder()</a></code></td>
</tr>
<tr class="odd">
<td><code>ggplot2</code></td>
<td>
<code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point()</a></code>, <code><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html" class="external-link">geom_smooth()</a></code>,
<code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col()</a></code>, <code><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html" class="external-link">geom_boxplot()</a></code>
</td>
</tr>
<tr class="even">
<td><code>lubridate</code></td>
<td><code><a href="https://lubridate.tidyverse.org/reference/year.html" class="external-link">year()</a></code></td>
</tr>
<tr class="odd">
<td><code>purrr</code></td>
<td>
<code><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_lgl()</a></code>, <code><a href="https://purrr.tidyverse.org/reference/map_dfr.html" class="external-link">map_df()</a></code>,
<code><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_chr()</a></code>
</td>
</tr>
</tbody>
</table>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Winger2019Nocturnal" class="csl-entry">
Winger, Benjamin M., Brian C. Weeks, Andrew Farnsworth, Andrew W. Jones,
Mary Hennen, and David E. Willard. 2019. <span>“Nocturnal Flight-Calling
Behaviour Predicts Vulnerability to Artificial Light in Migratory
Birds.”</span> <em>Proceedings of the Royal Society B: Biological
Sciences</em> 286 (1900): 20190364. <a href="https://doi.org/10.1098/rspb.2019.0364" class="external-link">https://doi.org/10.1098/rspb.2019.0364</a>.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Simon Urbanek.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
